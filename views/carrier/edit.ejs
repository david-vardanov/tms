<% layout('layout.ejs') %>

<div class="container mt-5">
  <h2>Edit Carrier</h2>
  <form action="/carriers/<%= carrier._id %>/?_method=PUT" method="POST">
    <!-- Carrier Name -->
    <div class="mb-3">
      <label for="name" class="form-label">Name</label>
      <input type="text" class="form-control" id="name" name="name" value="<%= carrier.name %>" required>
    </div>
    
    <!-- Phone -->
    <div class="mb-3">
      <label for="phone" class="form-label">Phone</label>
      <input type="text" class="form-control" id="phone" name="phone" value="<%= carrier.phone %>" required>
    </div>
    
    <!-- Email -->
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input type="email" class="form-control" id="email" name="email" value="<%= carrier.email %>" required>
    </div>
    
    <!-- DOT Number -->
    <div class="mb-3">
      <label for="dotNumber" class="form-label">DOT Number</label>
      <input type="text" class="form-control" id="dotNumber" name="dotNumber" value="<%= carrier.dotNumber %>" required>
    </div>
    
    <!-- EIN Number -->
    <div class="mb-3">
      <label for="einNumber" class="form-label">EIN Number</label>
      <input type="text" class="form-control" id="einNumber" name="einNumber" value="<%= carrier.einNumber %>" required>
    </div>
    
    <!-- Address -->
    <div class="mb-3">
      <label for="address" class="form-label">Address</label>
      <input type="text" class="form-control" id="address" name="address" value="<%= carrier.address %>" required>
    </div>
    
    <!-- Address 2 -->
    <div class="mb-3">
      <label for="address2" class="form-label">Address 2</label>
      <input type="text" class="form-control" id="address2" name="address2" value="<%= carrier.address2 %>">
    </div>
    
    <!-- City -->
    <div class="mb-3">
      <label for="city" class="form-label">City</label>
      <input type="text" class="form-control" id="city" name="city" value="<%= carrier.city %>" required>
    </div>
    
    <!-- State -->
    <div class="mb-3">
      <label for="state" class="form-label">State</label>
      <input type="text" class="form-control" id="state" name="state" value="<%= carrier.state %>" required>
    </div>
    
    <!-- Zip -->
    <div class="mb-3">
      <label for="zip" class="form-label">Zip</label>
      <input type="text" class="form-control" id="zip" name="zip" value="<%= carrier.zip %>" required>
    </div>
    
<!-- Payment Option -->
<div class="form-group">
    <label for="paymentOption">Payment Option</label>
    <div>
      <% carrier.schema.path('paymentMethod.type').enumValues.forEach(function(option) { %>
        <div class="form-check">
          <input class="form-check-input" type="radio" id="paymentOption<%= option %>" name="paymentOption" value="<%= option %>" <% if (carrier.paymentMethod.type === option) { %>checked<% } %>>
          <label class="form-check-label" for="paymentOption<%= option %>"><%= option %></label>
        </div>
      <% }); %>
    </div>
</div>


<button type="submit" class="btn btn-primary">Update</button>

</form>



<!-- Delete Carrier Form -->
<form id="deleteCarrierForm">
  <input type="hidden" id="carrierId" value="<%=carrier._id %>">
  <button type="button" onclick="deleteCarrier()" class="btn btn-danger">Delete Carrier</button>
</form>
<!-- Moderate Carrier Form -->
<% if (carrier.status === 'inModeration') { %>

  <form id="moderateCarrierForm" method="POST">
    <input type="hidden" name="_method" value="PUT">
    <input type="hidden" name="status" value="active">
    <input type="hidden" name="agreementAccepted" value="false">
    <div class="form-group form-check">
      <input type="checkbox" class="form-check-input" id="agreementAccepted" name="agreementAccepted" required>
      <label class="form-check-label" for="agreementAccepted">I confirm that I have read and verified all the information about <%= carrier.name %>.</label>
    </div>
    <button type="submit" class="btn btn-primary">Activate</button>
  </form>
<% } %>