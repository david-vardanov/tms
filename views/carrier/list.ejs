<% layout('layout.ejs') %>
<div class="container mt-4">
    <div class="row">
      <div class="col">
        <h2>Carriers List</h2>
  
        <!-- Filter form -->
        <form id="filterForm">
          <div class="row">
            <div class="col">
              <label for="startDate">Start Date</label>
              <input type="date" class="form-control" id="startDate" name="startDate">
            </div>
            <div class="col">
              <label for="endDate">End Date</label>
              <input type="date" class="form-control" id="endDate" name="endDate">
            </div>
            <div class="col">
              <label for="isExpired">Is Expired</label>
              <select class="form-select" id="isExpired" name="isExpired">
                <option value="">All</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
              </select>
            </div>
            <div class="col">
              <label for="inModeration">In Moderation</label>
              <select class="form-select" id="inModeration" name="inModeration">
                <option value="">All</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
              </select>
            </div>
            <div class="col d-flex align-items-end">
              <button type="submit" class="btn btn-primary">Apply Filters</button>
            </div>
          </div>
        </form>
        <!-- Carriers table -->
<div class="row mt-4">
    <div class="col">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Carrier Name</th>
            <th scope="col">MC Number</th>
            <th scope="col">Created Date</th>
            <th scope="col">Expired</th>
            <th scope="col">In Moderation</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% carriers.forEach(carrier => { %>
            <tr>
              <td><%= carrier._id %></td>
              <td><%= carrier.name %></td>
              <td><%= carrier.mcNumber %></td>
              <td><%= carrier.createdAt %></td>
              <td><%= carrier.isExpired ? 'Yes' : 'No' %></td>
              <td><%= carrier.status === 'inModeration' ? 'Yes' : 'No' %></td>
              <td><a class="btn btn-secondary btn-sm mx-1" href="/carriers/<%=carrier._id %>"> Show</a>
                <a class="btn btn-primary btn-sm mx-1" href="/carriers/<%=carrier._id %>/edit"> Edit</a>
                <% if(user.role==="admin") { %>
                  <form id="deleteCarrierForm">
                    <input type="hidden" id="carrierId" value="<%=carrier._id %>">
                    <button type="button" onclick="deleteCarrier()">Delete Carrier</button>
                </form>
                  <% } %></td>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
  
  <!-- Pagination -->
  <div class="row">
    <div class="col">
      <nav aria-label="Carriers pagination">
        <ul class="pagination">
          <% pagesCarriers.forEach(page => { %>
            <li class="page-item <%= page.active ? 'active' : '' %>">
              <a class="page-link" href="?page=<%= page.number %>"><%= page.number %></a>
            </li>
          <% }) %>
        </ul>
      </nav>
    </div>
  </div>
  
  </div> <!-- Close container -->
  
  