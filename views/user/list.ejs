<% layout('layout.ejs') %>
<div class="container mt-4">
    <div class="row">
      <div class="col">
        <h2>User List</h2>
  
        
<div class="row mt-4">
    <div class="col">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">Role</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% users.forEach(user => { %>
            <tr>
              <td><%= user._id %></td>
              <td><%= user.username %></td>
              <td><%= user.email %></td>
              <td><%= user.role %></td>
              <td>
                <div class="row"><div class="col-md-6"><a class="btn btn-secondary btn-sm mx-1" href="/users/<%=user._id %>"> Show</a></div><div class="col-md-6"><% if(user.role==="admin") { %>
                    <form id="deleteUserForm">
                      <input type="hidden" id="userId" value="<%=user._id %>">
                      <button type="button" class="btn btn-danger btn-sm" onclick="deleteUser()">Delete</button>
                  </form>
                    <% } %></div></div>
                </td>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
  
  <!-- Pagination -->
  <div class="row">
    <div class="col">
      <nav aria-label="users pagination">
        <ul class="pagination">
          <% pagesUsers.forEach(page => { %>
            <li class="page-item <%= page.active ? 'active' : '' %>">
              <a class="page-link" href="?page=<%= page.number %>"><%= page.number %></a>
            </li>
          <% }) %>
        </ul>
      </nav>
    </div>
  </div>
  
  </div> <!-- Close container -->
  
  